{% extends 'generic/base_dashboard.html' %}
{% load static %}

{% block container %}
    <div class="d-flex justify-content-center mt-2">
        <form method="POST" novalidate enctype="multipart/form-data" class="col-xl-5 col-lg-6 col-md-8 col-sm-8 col-10" id="alter-form">
            {% csrf_token %}
            <h3 class="text-center">Alterar perfil</h3>
            {% for error in form.non_field_errors %}
                <span class="text-danger float-left"> {{ error }} </span>
            {% endfor %}
            {% for field in form %}
                {% if field.name == 'image' %}
                    <label>{{ field.label }}</label>
                    <div class="custom-file mb-2">
                        <label for="{{ field.name }}" class="custom-file-label" id="file-label">Selecione a foto</label>
                        {{ field }}
                    </div>
                {% else %}
                    {{ field.label }}
                    {{ field }}
                {% endif %}
                <div class="text-danger">
                    {% for error in field.errors %}
                        <span class="float-left">{{ error | escape }}</span>
                        <br>
                    {% endfor %}
                </div>
                <hr>
            {% endfor %}
            <button class="btn btn-primary text-white btn-block" type="submit">Alterar</button>
        </form>
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'js/dashboard.js' %}"></script>
    <script>
        document.querySelector('.custom-file-input').addEventListener('change', function (e) {
            let fileName = document.getElementById("image_input").files[0].name;
            let nextSibling = document.getElementById("file-label");
            nextSibling.innerText = fileName;
        });</script>
{% endblock %}
